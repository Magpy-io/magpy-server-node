// IMPORTS
import dotenv from 'dotenv';
import SysTray, { ClickEvent } from 'forked-systray';
import { main } from './mainFunction';

dotenv.config();

main().catch(err => {
  console.log('error init server');
  console.log(err);
});

const systray: any = new SysTray({
  menu: {
    icon: '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hf+zqG7/6Nya//Llo//r3p3/7uGg/9vQl//az5b/7uGf//Djof/g1JT/uK1x//bppv/Sx47/vbF2//Llo//s357/7eCf/+3gn//t4KD/7uCX/PPt0v/g4uXQAAAAAQAAAAAAAAAAAAAAAOHi58P28dn/7+GX++7hof/u4Z//7eGf/+/jof/o25r/sqdu//Djo//YzZT/q6Bq/+HUk//06KX/7uGf//Djof/x5KL/7eCe//Llo//bz5D/vrJ3//Llo//t4aD/taty/+bZmP/w46H/7eCf/+7hn//u4aH/7+GX+/bx2f/h4ufDAAAAAAAAAAD///8DAAAAAOLj6Kb69uf/8OGa+u7iof/u4qD/7uGf//Pmo//d0JH/wLR5//Llo//y5aL/4NWb/66kcP/KvoD/7+Og//PmpP/v4qD/7OCe//Pmo//Rxof/x7t///Llo//y5aP/wbZ6/9rOj//z5qT/7uGf/+7ioP/u4qH/8OGa+vr25v/i4+imAAAAAP///wP///8EAAAAAOHj5Xb7+fP/8OOj+vDjn//v46H/7+Kg//Llov/n25v/sqdt//DjoP/06KX/9+mm//Toqf/KwIv/s6hx/9LGh//s35z/9Oek//fqp//Ctnr/28+R//rtqv/w46D/s6ht/+bZmv/y5aL/7+Kg/+/iof/v45//8OOj+vv58//j4+V2AAAAAP///wT///8DAAAAANzY2Dvv8PH/8Oa4/vHjnP7w46L/8OOh/+/ioP/16KX/zsSM/7OocP/YzIz/39OS/93Qjv/m2Zn/59yg/8O5hf+0qnX/v7R5/97Skf+3rHL/2s6P/9nNjP+0qXD/zcKL//Xopf/v4qD/8OOh//Djov/x45z+7+a4/u/v8f/c3Ng7AAAAAP///wP///8BAAAAAAAAAAXr6/DW+PPd//Hkmvzx5KP/8eSh//Hkov/x5KH/9eim/9/Um//Euob/wbaC/760gf/TyI//9eij//nsqv/v46b/39Wc/8G2f//Ct37/zsSN/8K4hP/f1Jv/9Oim//Hkof/x5KL/8eSh//Hko//x5Jr8+PPd/+vr8NYAAAAFAAAAAP///wEAAAAA////BAAAAADn5+l2///+//LmrPry5Z//8uWj//Llov/y5aL/8eSh//bppf/366j/9umo//fqqP/16ab/9Oek/+bZl//q3Zr/8+ai/7Opcf/p3Z//+Oup//fqqP/26aX/8eSh//Llov/y5aL/8uWj//Lln//y5qz6///+/+fn6XYAAAAA////BAAAAAAAAAAA////AQAAAAC7u6oP7u/z4/jz3//z5pv88+ak//Pmo//z5qP/8+aj//Llov/y5aH/8uWi//Hkof/16KT/5diW/7itdv+8sXr/qJ1l/93Sl//466b/8eSh//Llov/y5aL/8+aj//Pmo//z5qP/8+ak//Pmm/z489//7u7z47u7qg8AAAAA////AQAAAAAAAAAAAAAAAP///wQAAAAA6enpXP/////068H69Oab/vPnpv/056P/9Oej//Tno//056P/9Oej//Pmo//466f/28+R/7qwd/+6sHb/1MmP//zvqv/y5aL/9Oek//Tno//056P/9Oej//Pno//z56b/9Oab/vTrwfr/////6enpXAAAAAD///8EAAAAAAAAAAAAAAAAAAAAAAAAAAD///8CAAAAAPDx86X/////9emy+PXnnP/06Kf/9Oek//TnpP/056T/9Oek//TnpP/056P/9umn/9XKk//UyZL/9+qn//Tno//06KT/9Oek//TopP/056T/9Oek//Top//155z/9emy+P/////w8fOlAAAAAP///wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8CAAAAAICAAAby8vXK//////bqs/j26Jz+9emm//Xopv/16KT/9eik//XopP/16KT/9eik//rtqf/67an/9eik//Xopf/16KT/9eik//XopP/16Kb/9emm//bonP726rP4//////L09cqAgAAGAAAAAP///wIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AwAAAADbyMgO9PX3yv/////27sT79umd/Pbpof/26af/9umn//bppv/26aX/9uml//XopP/16KT/9uml//bppf/26ab/9umn//bpp//26aH/9umd/PbuxPv/////9PX3ytvbyA4AAAAA////AwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP+/vwQAAAAAmZkABfb296T///////vo//fss/r36Z389+mg/vfqpP/36qf/9+qn//fqqP/36qj/9+qn//fqp//36qT/9+mf/vfpnfz37LP6//vo///////29vekmZkABQAAAAC/v78EAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8DAAAAAAAAAAD09PFa+fr+4f///////+r/+fDD/vnsq/r466D6+Oqc+/fpnPz36Zz8+Oqc+/jroPr57Kv6+fDD/v//6v//////+fr+4fT08VoAAAAAAAAAAP///wMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Av///wIAAAAA6tW/DPj4+HL6+//U//////////////z////v////6P///+f////v/////P////////////r6/9T4+Phy6uq/DAAAAAD///8C////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8EAAAAAAAAAAAAAAAC9vb2Nvr6/XH6/P+h/P7/vvz+/8v8/v/L/P7/vvr8/6H6+v1x9vb2NgAAAAIAAAAAAAAAAP///wQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////Af///wQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8E////AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8B////A////wT///8D////AQAAAAAAAAAA////Af///wP///8E////A////wEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/8PD/8AAAAP/PDz/wAAAA/zAAz/AAAAD+wAA38AAAAP2AABvwAAAA+gAABfAAAAD0AAAC8AAAAOgAAAFwAAAAyAAAATAAAADQAAAAsAAAAKAAAABQAAAAoAAAAFAAAABAAAAAIAAAAEAAAAAgAAAAQAAAACAAAABAAAAAIAAAAMAAAAAwAAAAgAAAABAAAACAAAAAEAAAAMAAAAAwAAAAQAAAACAAAABAAAAAIAAAAEAAAAAgAAAAQAAAACAAAACgAAAAUAAAAKAAAABQAAAA0AAAALAAAADoAAABcAAAAOgAAAFwAAAA9AAAAvAAAAD6AAAF8AAAAP2AABvwAAAA/kAAJ/AAAAD/sADf8AAAAP/P/z/wAAAA//Bg//AAAAA=',
    title: '',
    tooltip: 'Tips',
    items: [
      {
        title: 'Exit',
        tooltip: 'bb',
        checked: false,
        enabled: true,
      },
    ],
  },
});

systray.on('click', (a: ClickEvent) => {
  if (a.seq_id == 0) {
    systray.kill();
  }
});
